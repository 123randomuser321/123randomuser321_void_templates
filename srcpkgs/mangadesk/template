# Template file for 'mangadesk'
pkgname=mangadesk
version=0.7.6
revision=1
build_style=go
go_import_path="github.com/darylhjd/mangadesk"
short_desc="Terminal Client for MangaDex"
maintainer="Sembo Sadur <labmailssadur@gmail.com>"
license="MIT"
homepage="https://github.com/darylhjd/mangadesk"
distfiles="${homepage}/archive/refs/tags/v${version}.tar.gz"
checksum=4d4f0c36435fbc3c791e923fbfa2408cc46c8d6fab7126046fd1cc9f95479d15


post_install() {
	
	vlicense LICENSE
	
	mkdir -p ${DESTDIR}/usr/share/doc/${pkgname}
	vinstall app/core/CONFIG.md 0644 usr/share/doc/${pkgname}
	vsed -i ${DESTDIR}/usr/share/doc/${pkgname}/CONFIG.md -e "s#titled \`downloads\`#titled \`.mangadesk\`#"

	sed -n '75,88p' README.md > KEYBINDS.md
	vinstall KEYBINDS.md 0644 usr/share/doc/${pkgname}

	mkdir -p ${DESTDIR}/usr/libexec
	mv ${DESTDIR}/usr/bin/mangadesk ${DESTDIR}/usr/libexec/
	vbin ${FILESDIR}/mangadesk
	vsed -i ${DESTDIR}/usr/bin/mangadesk -e s/__VERSION/${version}/
	
}
